# Kickstart file automatically generated by anaconda.
# Version=DEVEL

# System authorization information. By default, the authconfig command sets up the Shadow Password Suite (--enableshadow) and MD5 encryption (--enablemd5)
auth --enableshadow --passalgo=sha512 --kickstart
eula --agreed

# Start the installation process. Use install for new installation or upgrade for upgrade system
install

# The installation source that can be local 'cdrom', remote http 'url --url http://', remote ftp 'url --url ftp://' or remote nfs 'nfs --server=serverip --dir=/instdir'
cdrom

# Use text mode install
text

# Set language used during the installation process and keyboard configuration
lang en_US.UTF-8

# Keyboard layouts
keyboard --vckeymap=us --xlayouts=''

# System network configuration. It can also be a fixed via dhcp with 'network --bootproto=dhcp'
network  --bootproto=dhcp --device=link
network  --hostname=centos-7
unsupported_hardware

# Sets the root password. This password can be copied from /etc/shadow
rootpw vagrant

# Firewall configuration. (firewall --enabled --port=22:tcp)
firewall --disable

# SElinux configuration. If do not know what is use 'selinux --disabled'
selinux --permissive

# System clock configuration
timezone --utc UTC

# GRUB configuration
bootloader --location=mbr

# Do not configure the X Window System
skipx

# Clear the Master Boot Record
zerombr

# Remove all Linux partitions on the unique disk on the system : sda
clearpart --all --initlabel

# Configuration of partitions
autopart
firstboot --disabled

# Reboot after installation
reboot

# Create local user
user --name=vagrant --plaintext --password vagrant --groups=vagrant,wheel

# RPMs to be installed: @ means rpms group and - means uninstallation
%packages
@Core
@Development Tools
kernel-devel
make
net-tools
biosdevname
authconfig
system-config-firewall-base
sudo
wget
perl
coreutils
yum-utils
%end

%post

# update root certs
wget -O/etc/pki/tls/certs/ca-bundle.crt http://curl.haxx.se/ca/cacert.pem

# sudo
echo "vagrant        ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers.d/vagrant
sed -i "s/^.*requiretty/#Defaults requiretty/" /etc/sudoers

%end